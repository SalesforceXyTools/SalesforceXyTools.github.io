<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Exia.Huang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Exia.Huang">
<meta property="og:url" content="http://www.ibmer.info/page/14/index.html">
<meta property="og:site_name" content="Exia.Huang">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Exia.Huang">
  
    <link rel="alternate" href="/atom.xml" title="Exia.Huang" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Exia.Huang</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.ibmer.info"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-php-js-json" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/php-js-json.html" class="article-date">
  <time datetime="2014-07-08T02:10:55.000Z" itemprop="datePublished">2014-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/php-js-json.html">PHP解析键值没有双引号的json数组,js json string 转php json</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="PHP解析键值没有双引号的json数组-js-json-string-转php-json"><a href="#PHP解析键值没有双引号的json数组-js-json-string-转php-json" class="headerlink" title="PHP解析键值没有双引号的json数组,js json string 转php json"></a>PHP解析键值没有双引号的json数组,js json string 转php json</h4><p>在js中传递过来的json，很多时候都是不规范的json,</p>
<p>PHP如果想直接调用js 中的json数据，一般通过json_decode都会出现null的问题，</p>
<p>原因是编码，单引号，换行等问题导致无法解析，Google和百度找半天都没有解决方案，或者不完全的。</p>
<p>ibmer.info这里给出一个处理的类，可以方便处理。</p>
<p>&nbsp;</p>
<h3 id="类使用方法"><a href="#类使用方法" class="headerlink" title="类使用方法"></a>类使用方法</h3><p>&nbsp;</p>
<ul>
<li>Converts to and from JSON format.</li>
</ul>
<p>*</p>
<ul>
<li>Brief example of use:<br>*</li>
<li>&lt;code&gt;</li>
<li>// create a new instance of Services_JSON</li>
<li>$json = new Services_JSON();<br>*</li>
<li>// convert a complexe value to JSON notation, and send it to the browser</li>
<li>$value = array(‘foo’, ‘bar’, array(1, 2, ‘baz’), array(3, array(4)));</li>
<li>$output = $json-&gt;encode($value);<br>*</li>
<li>print($output);</li>
<li>// prints: [“foo”,”bar”,[1,2,”baz”],[3,[4]]]<br>*</li>
<li>// accept incoming POST data, assumed to be in JSON notation</li>
<li>$input = file_get_contents(‘php://input’, 1000000);</li>
<li>$value = $json-&gt;decode($input);</li>
<li>&lt;/code&gt;</li>
</ul>
<p>&nbsp;</p>
<h3 id="类源代码。"><a href="#类源代码。" class="headerlink" title="类源代码。"></a>类源代码。</h3><p>[php]</p>
<p>&lt;?php<br>if ( !class_exists( ‘Services_JSON’ ) ) :<br>/<em> vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: </em>/<br>/**</p>
<ul>
<li>Converts to and from JSON format.<br>*</li>
<li>JSON (JavaScript Object Notation) is a lightweight data-interchange</li>
<li>format. It is easy for humans to read and write. It is easy for machines</li>
<li>to parse and generate. It is based on a subset of the JavaScript</li>
<li>Programming Language, Standard ECMA-262 3rd Edition - December 1999.</li>
<li>This feature can also be found in Python. JSON is a text format that is</li>
<li>completely language independent but uses conventions that are familiar</li>
<li>to programmers of the C-family of languages, including C, C++, C#, Java,</li>
<li>JavaScript, Perl, TCL, and many others. These properties make JSON an</li>
<li>ideal data-interchange language.<br>*</li>
<li>This package provides a simple encoder and decoder for JSON notation. It</li>
<li>is intended for use with client-side Javascript applications that make</li>
<li>use of HTTPRequest to perform server communication functions - data can</li>
<li>be encoded into JSON notation for use in a client-side javascript, or</li>
<li>decoded from incoming Javascript requests. JSON format is native to</li>
<li>Javascript, and can be directly eval()’ed with no further parsing</li>
<li>overhead<br>*</li>
<li>All strings should be in ASCII or UTF-8 format!<br>*</li>
<li>LICENSE: Redistribution and use in source and binary forms, with or</li>
<li>without modification, are permitted provided that the following</li>
<li>conditions are met: Redistributions of source code must retain the</li>
<li>above copyright notice, this list of conditions and the following</li>
<li>disclaimer. Redistributions in binary form must reproduce the above</li>
<li>copyright notice, this list of conditions and the following disclaimer</li>
<li>in the documentation and/or other materials provided with the</li>
<li>distribution.<br>*</li>
<li>THIS SOFTWARE IS PROVIDED ``AS IS’’ AND ANY EXPRESS OR IMPLIED</li>
<li>WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</li>
<li>MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN</li>
<li>NO EVENT SHALL CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</li>
<li>INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</li>
<li>BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS</li>
<li>OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</li>
<li>ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR</li>
<li>TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE</li>
<li>USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</li>
<li>DAMAGE.<br>*</li>
<li>@category</li>
<li>@package Services_JSON</li>
<li>@author Michal Migurski &lt;mike-json@teczno.com&gt;</li>
<li>@author Matt Knapp &lt;mdknapp[at]gmail[dot]com&gt;</li>
<li>@author Brett Stimmerman &lt;brettstimmerman[at]gmail[dot]com&gt;</li>
<li>@copyright 2005 Michal Migurski</li>
<li>@version CVS: $Id: JSON.php 288200 2009-09-09 15:41:29Z alan_k $</li>
<li>@license <a href="http://www.opensource.org/licenses/bsd-license.php" target="_blank" rel="external">http://www.opensource.org/licenses/bsd-license.php</a></li>
<li>@link <a href="http://pear.php.net/pepr/pepr-proposal-show.php?id=198" target="_blank" rel="external">http://pear.php.net/pepr/pepr-proposal-show.php?id=198</a><br>*/</li>
</ul>
<p>/**</p>
<ul>
<li>Marker constant for Services_JSON::decode(), used to flag stack state<br>*/<br>define(‘SERVICES_JSON_SLICE’, 1);</li>
</ul>
<p>/**</p>
<ul>
<li>Marker constant for Services_JSON::decode(), used to flag stack state<br>*/<br>define(‘SERVICES_JSON_IN_STR’, 2);</li>
</ul>
<p>/**</p>
<ul>
<li>Marker constant for Services_JSON::decode(), used to flag stack state<br>*/<br>define(‘SERVICES_JSON_IN_ARR’, 3);</li>
</ul>
<p>/**</p>
<ul>
<li>Marker constant for Services_JSON::decode(), used to flag stack state<br>*/<br>define(‘SERVICES_JSON_IN_OBJ’, 4);</li>
</ul>
<p>/**</p>
<ul>
<li>Marker constant for Services_JSON::decode(), used to flag stack state<br>*/<br>define(‘SERVICES_JSON_IN_CMT’, 5);</li>
</ul>
<p>/**</p>
<ul>
<li>Behavior switch for Services_JSON::decode()<br>*/<br>define(‘SERVICES_JSON_LOOSE_TYPE’, 16);</li>
</ul>
<p>/**</p>
<ul>
<li>Behavior switch for Services_JSON::decode()<br>*/<br>define(‘SERVICES_JSON_SUPPRESS_ERRORS’, 32);</li>
</ul>
<p>/**</p>
<ul>
<li>Converts to and from JSON format.<br>*</li>
<li>Brief example of use:<br>*</li>
<li>&lt;code&gt;</li>
<li>// create a new instance of Services_JSON</li>
<li>$json = new Services_JSON();<br>*</li>
<li>// convert a complexe value to JSON notation, and send it to the browser</li>
<li>$value = array(‘foo’, ‘bar’, array(1, 2, ‘baz’), array(3, array(4)));</li>
<li>$output = $json-&gt;encode($value);<br>*</li>
<li>print($output);</li>
<li>// prints: [&quot;foo&quot;,&quot;bar&quot;,[1,2,&quot;baz&quot;],[3,[4]]]<br>*</li>
<li>// accept incoming POST data, assumed to be in JSON notation</li>
<li>$input = file_get_contents(‘php://input’, 1000000);</li>
<li>$value = $json-&gt;decode($input);</li>
<li>&lt;/code&gt;<br><em>/<br>class Services_JSON<br>{<br>/*</em></li>
<li>constructs a new JSON instance<br>*</li>
<li>@param int $use object behavior flags; combine with boolean-OR<br>*</li>
<li>possible values:</li>
<li><ul>
<li>SERVICES_JSON_LOOSE_TYPE: loose typing.</li>
</ul>
</li>
<li>&quot;{…}&quot; syntax creates associative arrays</li>
<li>instead of objects in decode().</li>
<li><ul>
<li>SERVICES_JSON_SUPPRESS_ERRORS: error suppression.</li>
</ul>
</li>
<li>Values which can’t be encoded (e.g. resources)</li>
<li>appear as NULL instead of throwing errors.</li>
<li>By default, a deeply-nested resource will</li>
<li>bubble up with an error, so all return values</li>
<li>from encode() should be checked with isError()<br>*/<br>function Services_JSON($use = 0)<br>{<br>$this-&gt;use = $use;<br>}</li>
</ul>
<p>/**</p>
<ul>
<li>convert a string from one UTF-16 char to one UTF-8 char<br>*</li>
<li>Normally should be handled by mb_convert_encoding, but</li>
<li>provides a slower PHP-only method for installations</li>
<li>that lack the multibye string extension.<br>*</li>
<li>@param string $utf16 UTF-16 character</li>
<li>@return string UTF-8 character</li>
<li>@access private<br>*/<br>function utf162utf8($utf16)<br>{<br>// oh please oh please oh please oh please oh please<br>if(function_exists(‘mb_convert_encoding’)) {<br>return mb_convert_encoding($utf16, ‘UTF-8’, ‘UTF-16’);<br>}</li>
</ul>
<p>$bytes = (ord($utf16[0]) &lt;&lt; 8) | ord($utf16[1]);</p>
<p>switch(true) {<br>case ((0x7F &amp; $bytes) == $bytes):<br>// this case should never be reached, because we are in ASCII range<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return chr(0x7F &amp; $bytes);</p>
<p>case (0x07FF &amp; $bytes) == $bytes:<br>// return a 2-byte UTF-8 character<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return chr(0xC0 | (($bytes &gt;&gt; 6) &amp; 0x1F))<br>. chr(0x80 | ($bytes &amp; 0x3F));</p>
<p>case (0xFFFF &amp; $bytes) == $bytes:<br>// return a 3-byte UTF-8 character<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return chr(0xE0 | (($bytes &gt;&gt; 12) &amp; 0x0F))<br>. chr(0x80 | (($bytes &gt;&gt; 6) &amp; 0x3F))<br>. chr(0x80 | ($bytes &amp; 0x3F));<br>}</p>
<p>// ignoring UTF-32 for now, sorry<br>return ‘’;<br>}</p>
<p>/**</p>
<ul>
<li>convert a string from one UTF-8 char to one UTF-16 char<br>*</li>
<li>Normally should be handled by mb_convert_encoding, but</li>
<li>provides a slower PHP-only method for installations</li>
<li>that lack the multibye string extension.<br>*</li>
<li>@param string $utf8 UTF-8 character</li>
<li>@return string UTF-16 character</li>
<li>@access private<br>*/<br>function utf82utf16($utf8)<br>{<br>// oh please oh please oh please oh please oh please<br>if(function_exists(‘mb_convert_encoding’)) {<br>return mb_convert_encoding($utf8, ‘UTF-16’, ‘UTF-8’);<br>}</li>
</ul>
<p>switch(strlen($utf8)) {<br>case 1:<br>// this case should never be reached, because we are in ASCII range<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return $utf8;</p>
<p>case 2:<br>// return a UTF-16 character from a 2-byte UTF-8 char<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return chr(0x07 &amp; (ord($utf8[0]) &gt;&gt; 2))<br>. chr((0xC0 &amp; (ord($utf8[0]) &lt;&lt; 6))<br>| (0x3F &amp; ord($utf8[1])));</p>
<p>case 3:<br>// return a UTF-16 character from a 3-byte UTF-8 char<br>// see: <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>return chr((0xF0 &amp; (ord($utf8[0]) &lt;&lt; 4))<br>| (0x0F &amp; (ord($utf8[1]) &gt;&gt; 2)))<br>. chr((0xC0 &amp; (ord($utf8[1]) &lt;&lt; 6))<br>| (0x7F &amp; ord($utf8[2])));<br>}</p>
<p>// ignoring UTF-32 for now, sorry<br>return ‘’;<br>}</p>
<p>/**</p>
<ul>
<li>encodes an arbitrary variable into JSON format (and sends JSON Header)<br>*</li>
<li>@param mixed $var any number, boolean, string, array, or object to be encoded.</li>
<li>see argument 1 to Services_JSON() above for array-parsing behavior.</li>
<li>if var is a strng, note that encode() always expects it</li>
<li>to be in ASCII or UTF-8 format!<br>*</li>
<li>@return mixed JSON string representation of input var or an error if a problem occurs</li>
<li>@access public<br><em>/<br>function encode($var)<br>{<br>header(‘Content-type: application/json’);<br>return $this-&gt;_encode($var);<br>}<br>/*</em></li>
<li>encodes an arbitrary variable into JSON format without JSON Header - warning - may allow CSS!!!!)<br>*</li>
<li>@param mixed $var any number, boolean, string, array, or object to be encoded.</li>
<li>see argument 1 to Services_JSON() above for array-parsing behavior.</li>
<li>if var is a strng, note that encode() always expects it</li>
<li>to be in ASCII or UTF-8 format!<br>*</li>
<li>@return mixed JSON string representation of input var or an error if a problem occurs</li>
<li>@access public<br><em>/<br>function encodeUnsafe($var)<br>{<br>return $this-&gt;_encode($var);<br>}<br>/*</em></li>
<li>PRIVATE CODE that does the work of encodes an arbitrary variable into JSON format<br>*</li>
<li>@param mixed $var any number, boolean, string, array, or object to be encoded.</li>
<li>see argument 1 to Services_JSON() above for array-parsing behavior.</li>
<li>if var is a strng, note that encode() always expects it</li>
<li>to be in ASCII or UTF-8 format!<br>*</li>
<li>@return mixed JSON string representation of input var or an error if a problem occurs</li>
<li>@access public<br>*/<br>function _encode($var)<br>{</li>
</ul>
<p>switch (gettype($var)) {<br>case ‘boolean’:<br>return $var ? ‘true’ : ‘false’;</p>
<p>case ‘NULL’:<br>return ‘null’;</p>
<p>case ‘integer’:<br>return (int) $var;</p>
<p>case ‘double’:<br>case ‘float’:<br>return (float) $var;</p>
<p>case ‘string’:<br>// STRINGS ARE EXPECTED TO BE IN ASCII OR UTF-8 FORMAT<br>$ascii = ‘’;<br>$strlen_var = strlen($var);</p>
<p>/*</p>
<ul>
<li>Iterate over every character in the string,</li>
<li>escaping with a slash or encoding to UTF-8 where necessary<br>*/<br>for ($c = 0; $c &lt; $strlen_var; ++$c) {</li>
</ul>
<p>$ord_var_c = ord($var[$c]);</p>
<p>switch (true) {<br>case $ord_var_c == 0x08:<br>$ascii .= ‘\b’;<br>break;<br>case $ord_var_c == 0x09:<br>$ascii .= ‘\t’;<br>break;<br>case $ord_var_c == 0x0A:<br>$ascii .= ‘\n’;<br>break;<br>case $ord_var_c == 0x0C:<br>$ascii .= ‘\f’;<br>break;<br>case $ord_var_c == 0x0D:<br>$ascii .= ‘\r’;<br>break;</p>
<p>case $ord_var_c == 0x22:<br>case $ord_var_c == 0x2F:<br>case $ord_var_c == 0x5C:<br>// double quote, slash, slosh<br>$ascii .= ‘\‘.$var[$c];<br>break;</p>
<p>case (($ord_var_c &gt;= 0x20) &amp;&amp; ($ord_var_c &lt;= 0x7F)):<br>// characters U-00000000 - U-0000007F (same as ASCII)<br>$ascii .= $var[$c];<br>break;</p>
<p>case (($ord_var_c &amp; 0xE0) == 0xC0):<br>// characters U-00000080 - U-000007FF, mask 110XXXXX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>if ($c+1 &gt;= $strlen_var) {<br>$c += 1;<br>$ascii .= ‘?’;<br>break;<br>}</p>
<p>$char = pack(‘C*’, $ord_var_c, ord($var[$c + 1]));<br>$c += 1;<br>$utf16 = $this-&gt;utf82utf16($char);<br>$ascii .= sprintf(‘\u%04s’, bin2hex($utf16));<br>break;</p>
<p>case (($ord_var_c &amp; 0xF0) == 0xE0):<br>if ($c+2 &gt;= $strlen_var) {<br>$c += 2;<br>$ascii .= ‘?’;<br>break;<br>}<br>// characters U-00000800 - U-0000FFFF, mask 1110XXXX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$char = pack(‘C*’, $ord_var_c,<br>@ord($var[$c + 1]),<br>@ord($var[$c + 2]));<br>$c += 2;<br>$utf16 = $this-&gt;utf82utf16($char);<br>$ascii .= sprintf(‘\u%04s’, bin2hex($utf16));<br>break;</p>
<p>case (($ord_var_c &amp; 0xF8) == 0xF0):<br>if ($c+3 &gt;= $strlen_var) {<br>$c += 3;<br>$ascii .= ‘?’;<br>break;<br>}<br>// characters U-00010000 - U-001FFFFF, mask 11110XXX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$char = pack(‘C*’, $ord_var_c,<br>ord($var[$c + 1]),<br>ord($var[$c + 2]),<br>ord($var[$c + 3]));<br>$c += 3;<br>$utf16 = $this-&gt;utf82utf16($char);<br>$ascii .= sprintf(‘\u%04s’, bin2hex($utf16));<br>break;</p>
<p>case (($ord_var_c &amp; 0xFC) == 0xF8):<br>// characters U-00200000 - U-03FFFFFF, mask 111110XX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>if ($c+4 &gt;= $strlen_var) {<br>$c += 4;<br>$ascii .= ‘?’;<br>break;<br>}<br>$char = pack(‘C*’, $ord_var_c,<br>ord($var[$c + 1]),<br>ord($var[$c + 2]),<br>ord($var[$c + 3]),<br>ord($var[$c + 4]));<br>$c += 4;<br>$utf16 = $this-&gt;utf82utf16($char);<br>$ascii .= sprintf(‘\u%04s’, bin2hex($utf16));<br>break;</p>
<p>case (($ord_var_c &amp; 0xFE) == 0xFC):<br>if ($c+5 &gt;= $strlen_var) {<br>$c += 5;<br>$ascii .= ‘?’;<br>break;<br>}<br>// characters U-04000000 - U-7FFFFFFF, mask 1111110X<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$char = pack(‘C*’, $ord_var_c,<br>ord($var[$c + 1]),<br>ord($var[$c + 2]),<br>ord($var[$c + 3]),<br>ord($var[$c + 4]),<br>ord($var[$c + 5]));<br>$c += 5;<br>$utf16 = $this-&gt;utf82utf16($char);<br>$ascii .= sprintf(‘\u%04s’, bin2hex($utf16));<br>break;<br>}<br>}<br>return ‘&quot;’.$ascii.’&quot;’;</p>
<p>case ‘array’:<br>/*</p>
<ul>
<li>As per JSON spec if any array key is not an integer</li>
<li>we must treat the the whole array as an object. We</li>
<li>also try to catch a sparsely populated associative</li>
<li>array with numeric keys here because some JS engines</li>
<li>will create an array with empty indexes up to</li>
<li>max_index which can cause memory issues and because</li>
<li>the keys, which may be relevant, will be remapped</li>
<li>otherwise.<br>*</li>
<li>As per the ECMA and JSON specification an object may</li>
<li>have any string as a property. Unfortunately due to</li>
<li>a hole in the ECMA specification if the key is a</li>
<li>ECMA reserved word or starts with a digit the</li>
<li>parameter is only accessible using ECMAScript’s</li>
<li>bracket notation.<br>*/</li>
</ul>
<p>// treat as a JSON object<br>if (is_array($var) &amp;&amp; count($var) &amp;&amp; (array_keys($var) !== range(0, sizeof($var) - 1))) {<br>$properties = array_map(array($this, ‘name_value’),<br>array_keys($var),<br>array_values($var));</p>
<p>foreach($properties as $property) {<br>if(Services_JSON::isError($property)) {<br>return $property;<br>}<br>}</p>
<p>return ‘{‘ . join(‘,’, $properties) . ‘}’;<br>}</p>
<p>// treat it like a regular array<br>$elements = array_map(array($this, ‘_encode’), $var);</p>
<p>foreach($elements as $element) {<br>if(Services_JSON::isError($element)) {<br>return $element;<br>}<br>}</p>
<p>return ‘[‘ . join(‘,’, $elements) . ‘]’;</p>
<p>case ‘object’:<br>$vars = get_object_vars($var);</p>
<p>$properties = array_map(array($this, ‘name_value’),<br>array_keys($vars),<br>array_values($vars));</p>
<p>foreach($properties as $property) {<br>if(Services_JSON::isError($property)) {<br>return $property;<br>}<br>}</p>
<p>return ‘{‘ . join(‘,’, $properties) . ‘}’;</p>
<p>default:<br>return ($this-&gt;use &amp; SERVICES_JSON_SUPPRESS_ERRORS)<br>? ‘null’<br>: new Services_JSON_Error(gettype($var).&quot; can not be encoded as JSON string&quot;);<br>}<br>}</p>
<p>/**</p>
<ul>
<li>array-walking function for use in generating JSON-formatted name-value pairs<br>*</li>
<li>@param string $name name of key to use</li>
<li>@param mixed $value reference to an array element to be encoded<br>*</li>
<li>@return string JSON-formatted name-value pair, like ‘&quot;name&quot;:value’</li>
<li>@access private<br>*/<br>function name_value($name, $value)<br>{<br>$encoded_value = $this-&gt;_encode($value);</li>
</ul>
<p>if(Services_JSON::isError($encoded_value)) {<br>return $encoded_value;<br>}</p>
<p>return $this-&gt;_encode(strval($name)) . ‘:’ . $encoded_value;<br>}</p>
<p>/**</p>
<ul>
<li>reduce a string by removing leading and trailing comments and whitespace<br>*</li>
<li>@param $str string string value to strip of comments and whitespace<br>*</li>
<li>@return string string value stripped of comments and whitespace</li>
<li>@access private<br>*/<br>function reduce_string($str)<br>{<br>$str = preg_replace(array(</li>
</ul>
<p>// eliminate single line comments in ‘// …’ form<br>‘#^\s*//(.+)$#m’,</p>
<p>// eliminate multi-line comments in ‘/<em> … </em>/‘ form, at start of string<br>‘#^\s<em>/\</em>(.+)*/#Us’,</p>
<p>// eliminate multi-line comments in ‘/<em> … </em>/‘ form, at end of string<br>‘#/*(.+)*/\s*$#Us’</p>
<p>), ‘’, $str);</p>
<p>// eliminate extraneous space<br>return trim($str);<br>}</p>
<p>/**</p>
<ul>
<li>decodes a JSON string into appropriate variable<br>*</li>
<li>@param string $str JSON-formatted string<br>*</li>
<li>@return mixed number, boolean, string, array, or object</li>
<li>corresponding to given JSON input string.</li>
<li>See argument 1 to Services_JSON() above for object-output behavior.</li>
<li>Note that decode() always returns strings</li>
<li>in ASCII or UTF-8 format!</li>
<li>@access public<br>*/<br>function decode($str)<br>{<br>$str = $this-&gt;reduce_string($str);</li>
</ul>
<p>switch (strtolower($str)) {<br>case ‘true’:<br>return true;</p>
<p>case ‘false’:<br>return false;</p>
<p>case ‘null’:<br>return null;</p>
<p>default:<br>$m = array();</p>
<p>if (is_numeric($str)) {<br>// Lookie-loo, it’s a number</p>
<p>// This would work on its own, but I’m trying to be<br>// good about returning integers where appropriate:<br>// return (float)$str;</p>
<p>// Return float or int, as appropriate<br>return ((float)$str == (integer)$str)<br>? (integer)$str<br>: (float)$str;</p>
<p>} elseif (preg_match(‘/^(&quot;|\’).*(\1)$/s’, $str, $m) &amp;&amp; $m[1] == $m[2]) {<br>// STRINGS RETURNED IN UTF-8 FORMAT<br>$delim = substr($str, 0, 1);<br>$chrs = substr($str, 1, -1);<br>$utf8 = ‘’;<br>$strlen_chrs = strlen($chrs);</p>
<p>for ($c = 0; $c &lt; $strlen_chrs; ++$c) {</p>
<p>$substr_chrs_c_2 = substr($chrs, $c, 2);<br>$ord_chrs_c = ord($chrs[$c]);</p>
<p>switch (true) {<br>case $substr_chrs_c_2 == ‘\b’:<br>$utf8 .= chr(0x08);<br>++$c;<br>break;<br>case $substr_chrs_c_2 == ‘\t’:<br>$utf8 .= chr(0x09);<br>++$c;<br>break;<br>case $substr_chrs_c_2 == ‘\n’:<br>$utf8 .= chr(0x0A);<br>++$c;<br>break;<br>case $substr_chrs_c_2 == ‘\f’:<br>$utf8 .= chr(0x0C);<br>++$c;<br>break;<br>case $substr_chrs_c_2 == ‘\r’:<br>$utf8 .= chr(0x0D);<br>++$c;<br>break;</p>
<p>case $substr_chrs_c_2 == ‘\&quot;’:<br>case $substr_chrs_c_2 == ‘\\’’:<br>case $substr_chrs_c_2 == ‘\\‘:<br>case $substr_chrs_c_2 == ‘\/‘:<br>if (($delim == ‘&quot;’ &amp;&amp; $substr_chrs_c_2 != ‘\\’’) ||<br>($delim == &quot;’&quot; &amp;&amp; $substr_chrs_c_2 != ‘\&quot;’)) {<br>$utf8 .= $chrs[++$c];<br>}<br>break;</p>
<p>case preg_match(‘/\\u[0-9A-F]{4}/i’, substr($chrs, $c, 6)):<br>// single, escaped unicode character<br>$utf16 = chr(hexdec(substr($chrs, ($c + 2), 2)))<br>. chr(hexdec(substr($chrs, ($c + 4), 2)));<br>$utf8 .= $this-&gt;utf162utf8($utf16);<br>$c += 5;<br>break;</p>
<p>case ($ord_chrs_c &gt;= 0x20) &amp;&amp; ($ord_chrs_c &lt;= 0x7F):<br>$utf8 .= $chrs[$c];<br>break;</p>
<p>case ($ord_chrs_c &amp; 0xE0) == 0xC0:<br>// characters U-00000080 - U-000007FF, mask 110XXXXX<br>//see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$utf8 .= substr($chrs, $c, 2);<br>++$c;<br>break;</p>
<p>case ($ord_chrs_c &amp; 0xF0) == 0xE0:<br>// characters U-00000800 - U-0000FFFF, mask 1110XXXX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$utf8 .= substr($chrs, $c, 3);<br>$c += 2;<br>break;</p>
<p>case ($ord_chrs_c &amp; 0xF8) == 0xF0:<br>// characters U-00010000 - U-001FFFFF, mask 11110XXX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$utf8 .= substr($chrs, $c, 4);<br>$c += 3;<br>break;</p>
<p>case ($ord_chrs_c &amp; 0xFC) == 0xF8:<br>// characters U-00200000 - U-03FFFFFF, mask 111110XX<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$utf8 .= substr($chrs, $c, 5);<br>$c += 4;<br>break;</p>
<p>case ($ord_chrs_c &amp; 0xFE) == 0xFC:<br>// characters U-04000000 - U-7FFFFFFF, mask 1111110X<br>// see <a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8" target="_blank" rel="external">http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8</a><br>$utf8 .= substr($chrs, $c, 6);<br>$c += 5;<br>break;</p>
<p>}</p>
<p>}</p>
<p>return $utf8;</p>
<p>} elseif (preg_match(‘/^[.<em>]$/s’, $str) || preg_match(‘/^{.</em>}$/s’, $str)) {<br>// array, or object notation</p>
<p>if ($str[0] == ‘[‘) {<br>$stk = array(SERVICES_JSON_IN_ARR);<br>$arr = array();<br>} else {<br>if ($this-&gt;use &amp; SERVICES_JSON_LOOSE_TYPE) {<br>$stk = array(SERVICES_JSON_IN_OBJ);<br>$obj = array();<br>} else {<br>$stk = array(SERVICES_JSON_IN_OBJ);<br>$obj = new stdClass();<br>}<br>}</p>
<p>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_SLICE,<br>‘where’ =&gt; 0,<br>‘delim’ =&gt; false));</p>
<p>$chrs = substr($str, 1, -1);<br>$chrs = $this-&gt;reduce_string($chrs);</p>
<p>if ($chrs == ‘’) {<br>if (reset($stk) == SERVICES_JSON_IN_ARR) {<br>return $arr;</p>
<p>} else {<br>return $obj;</p>
<p>}<br>}</p>
<p>//print(&quot;\nparsing {$chrs}\n&quot;);</p>
<p>$strlen_chrs = strlen($chrs);</p>
<p>for ($c = 0; $c &lt;= $strlen_chrs; ++$c) {</p>
<p>$top = end($stk);<br>$substr_chrs_c_2 = substr($chrs, $c, 2);</p>
<p>if (($c == $strlen_chrs) || (($chrs[$c] == ‘,’) &amp;&amp; ($top[‘what’] == SERVICES_JSON_SLICE))) {<br>// found a comma that is not inside a string, array, etc.,<br>// OR we’ve reached the end of the character list<br>$slice = substr($chrs, $top[‘where’], ($c - $top[‘where’]));<br>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_SLICE, ‘where’ =&gt; ($c + 1), ‘delim’ =&gt; false));<br>//print(&quot;Found split at {$c}: &quot;.substr($chrs, $top[‘where’], (1 + $c - $top[‘where’])).&quot;\n&quot;);</p>
<p>if (reset($stk) == SERVICES_JSON_IN_ARR) {<br>// we are in an array, so just push an element onto the stack<br>array_push($arr, $this-&gt;decode($slice));</p>
<p>} elseif (reset($stk) == SERVICES_JSON_IN_OBJ) {<br>// we are in an object, so figure<br>// out the property name and set an<br>// element in an associative array,<br>// for now<br>$parts = array();</p>
<p>if (preg_match(‘/^\s<em>([&quot;\’].</em>[^\][&quot;\’])\s<em>:\s</em>(\S.*),?$/Uis’, $slice, $parts)) {<br>// &quot;name&quot;:value pair<br>$key = $this-&gt;decode($parts[1]);<br>$val = $this-&gt;decode($parts[2]);</p>
<p>if ($this-&gt;use &amp; SERVICES_JSON_LOOSE_TYPE) {<br>$obj[$key] = $val;<br>} else {<br>$obj-&gt;$key = $val;<br>}<br>} elseif (preg_match(‘/^\s<em>(\w+)\s</em>:\s<em>(\S.</em>),?$/Uis’, $slice, $parts)) {<br>// name:value pair, where name is unquoted<br>$key = $parts[1];<br>$val = $this-&gt;decode($parts[2]);</p>
<p>if ($this-&gt;use &amp; SERVICES_JSON_LOOSE_TYPE) {<br>$obj[$key] = $val;<br>} else {<br>$obj-&gt;$key = $val;<br>}<br>}</p>
<p>}</p>
<p>} elseif ((($chrs[$c] == ‘&quot;’) || ($chrs[$c] == &quot;’&quot;)) &amp;&amp; ($top[‘what’] != SERVICES_JSON_IN_STR)) {<br>// found a quote, and we are not inside a string<br>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_IN_STR, ‘where’ =&gt; $c, ‘delim’ =&gt; $chrs[$c]));<br>//print(&quot;Found start of string at {$c}\n&quot;);</p>
<p>} elseif (($chrs[$c] == $top[‘delim’]) &amp;&amp;<br>($top[‘what’] == SERVICES_JSON_IN_STR) &amp;&amp;<br>((strlen(substr($chrs, 0, $c)) - strlen(rtrim(substr($chrs, 0, $c), ‘\‘))) % 2 != 1)) {<br>// found a quote, we’re in a string, and it’s not escaped<br>// we know that it’s not escaped becase there is <em>not</em> an<br>// odd number of backslashes at the end of the string so far<br>array_pop($stk);<br>//print(&quot;Found end of string at {$c}: &quot;.substr($chrs, $top[‘where’], (1 + 1 + $c - $top[‘where’])).&quot;\n&quot;);</p>
<p>} elseif (($chrs[$c] == ‘[‘) &amp;&amp;<br>in_array($top[‘what’], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {<br>// found a left-bracket, and we are in an array, object, or slice<br>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_IN_ARR, ‘where’ =&gt; $c, ‘delim’ =&gt; false));<br>//print(&quot;Found start of array at {$c}\n&quot;);</p>
<p>} elseif (($chrs[$c] == ‘]’) &amp;&amp; ($top[‘what’] == SERVICES_JSON_IN_ARR)) {<br>// found a right-bracket, and we’re in an array<br>array_pop($stk);<br>//print(&quot;Found end of array at {$c}: &quot;.substr($chrs, $top[‘where’], (1 + $c - $top[‘where’])).&quot;\n&quot;);</p>
<p>} elseif (($chrs[$c] == ‘{‘) &amp;&amp;<br>in_array($top[‘what’], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {<br>// found a left-brace, and we are in an array, object, or slice<br>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_IN_OBJ, ‘where’ =&gt; $c, ‘delim’ =&gt; false));<br>//print(&quot;Found start of object at {$c}\n&quot;);</p>
<p>} elseif (($chrs[$c] == ‘}’) &amp;&amp; ($top[‘what’] == SERVICES_JSON_IN_OBJ)) {<br>// found a right-brace, and we’re in an object<br>array_pop($stk);<br>//print(&quot;Found end of object at {$c}: &quot;.substr($chrs, $top[‘where’], (1 + $c - $top[‘where’])).&quot;\n&quot;);</p>
<p>} elseif (($substr_chrs_c_2 == ‘/*’) &amp;&amp;<br>in_array($top[‘what’], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {<br>// found a comment start, and we are in an array, object, or slice<br>array_push($stk, array(‘what’ =&gt; SERVICES_JSON_IN_CMT, ‘where’ =&gt; $c, ‘delim’ =&gt; false));<br>$c++;<br>//print(&quot;Found start of comment at {$c}\n&quot;);</p>
<p>} elseif (($substr_chrs_c_2 == ‘*/‘) &amp;&amp; ($top[‘what’] == SERVICES_JSON_IN_CMT)) {<br>// found a comment end, and we’re in one now<br>array_pop($stk);<br>$c++;</p>
<p>for ($i = $top[‘where’]; $i &lt;= $c; ++$i)<br>$chrs = substr_replace($chrs, ‘ ‘, $i, 1);</p>
<p>//print(&quot;Found end of comment at {$c}: &quot;.substr($chrs, $top[‘where’], (1 + $c - $top[‘where’])).&quot;\n&quot;);</p>
<p>}</p>
<p>}</p>
<p>if (reset($stk) == SERVICES_JSON_IN_ARR) {<br>return $arr;</p>
<p>} elseif (reset($stk) == SERVICES_JSON_IN_OBJ) {<br>return $obj;</p>
<p>}</p>
<p>}<br>}<br>}</p>
<p>/**</p>
<ul>
<li>@todo Ultimately, this should just call PEAR::isError()<br>*/<br>function isError($data, $code = null)<br>{<br>if (class_exists(‘pear’)) {<br>return PEAR::isError($data, $code);<br>} elseif (is_object($data) &amp;&amp; (get_class($data) == ‘services_json_error’ ||<br>is_subclass_of($data, ‘services_json_error’))) {<br>return true;<br>}</li>
</ul>
<p>return false;<br>}<br>}</p>
<p>if (class_exists(‘PEAR_Error’)) {</p>
<p>class Services_JSON_Error extends PEAR_Error<br>{<br>function Services_JSON_Error($message = ‘unknown error’, $code = null,<br>$mode = null, $options = null, $userinfo = null)<br>{<br>parent::PEAR_Error($message, $code, $mode, $options, $userinfo);<br>}<br>}</p>
<p>} else {</p>
<p>/**</p>
<ul>
<li>@todo Ultimately, this class shall be descended from PEAR_Error<br>*/<br>class Services_JSON_Error<br>{<br>function Services_JSON_Error($message = ‘unknown error’, $code = null,<br>$mode = null, $options = null, $userinfo = null)<br>{</li>
</ul>
<p>}<br>}</p>
<p>}<br>endif;</p>
<p>[/php]</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/php-js-json.html" data-id="cji8sg1to008r40iosr5n69g8" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-php-snoopy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/php-snoopy.html" class="article-date">
  <time datetime="2014-07-07T07:59:03.000Z" itemprop="datePublished">2014-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/php-snoopy.html">PHP采集利器：Snoopy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>下载地址:<a href="http://sourceforge.net/projects/snoopy/" target="_blank" rel="external">http://sourceforge.net/projects/snoopy/</a></p>
<p>Snoopy是一个php类，用来模拟浏览器的功能，可以获取网页内容，发送表单。Snoopy正确运行需要你的服务器的PHP版本在4以上，并且支持PCRE（Perl Compatible Regular Expressions），基本的LAMP服务都支持。</p>
<p>一、Snoopy的一些特点:</p>
<p>　　1.抓取网页的内容 fetch</p>
<p>　　2.抓取网页的文本内容 (去除HTML标签) fetchtext</p>
<p>　　3.抓取网页的链接，表单 fetchlinks fetchform</p>
<p>　　4.支持代理主机</p>
<p>　　5.支持基本的用户名/密码验证</p>
<p>　　6.支持设置user_agent, referer(来路), cookies和header content(头文件)</p>
<p>　　7.支持浏览器重定向，并能控制重定向深度</p>
<p>　　8.能把网页中的链接扩展成高质量的url(默认)</p>
<p>　　9.提交数据并且获取返回值</p>
<p>　　10.支持跟踪HTML框架</p>
<p>　　11.支持重定向的时候传递cookies，要求php4以上就可以了，由于本身是php一个类，无需扩支持，服务器不支持curl时候的最好选择。</p>
<p>二、类方法:</p>
<p>fetch($URI)<br>———–</p>
<p>　　这是为了抓取网页的内容而使用的方法。$URI参数是被抓取网页的URL地址。抓取的结果被存储在 $this-&gt;results 中。如果你正在抓取的是一个框架，Snoopy将会将每个框架追踪后存入数组中，然后存入 $this-&gt;results。</p>
<p>fetchtext($URI)<br>—————</p>
<p>　　本方法类似于fetch()，唯一不同的就是本方法会去除HTML标签和其他的无关数据，只返回网页中的文字内容。</p>
<p>fetchform($URI)<br>—————</p>
<p>　　本方法类似于fetch()，唯一不同的就是本方法会去除HTML标签和其他的无关数据，只返回网页中表单内容(form)。</p>
<p>fetchlinks($URI)<br>—————-</p>
<p>　　本方法类似于fetch()，唯一不同的就是本方法会去除HTML标签和其他的无关数据，只返回网页中链接(link)。<br>默认情况下，相对链接将自动补全，转换成完整的URL。</p>
<p>submit($URI,$formvars)<br>———————-</p>
<p>　　本方法向$URL指定的链接地址发送确认表单。$formvars是一个存储表单参数的数组。</p>
<p>submittext($URI,$formvars)<br>————————–</p>
<p>　　本方法类似于submit()，唯一不同的就是本方法会去除HTML标签和其他的无关数据，只返回登陆后网页中的文字内容。</p>
<p>submitlinks($URI)<br>—————-</p>
<p>　　本方法类似于submit()，唯一不同的就是本方法会去除HTML标签和其他的无关数据，只返回网页中链接(link)。<br>默认情况下，相对链接将自动补全，转换成完整的URL。</p>
<p>三、类属性: (缺省值在括号里)</p>
<p>$host 连接的主机<br>$port 连接的端口<br>$proxy_host 使用的代理主机，如果有的话<br>$proxy_port 使用的代理主机端口，如果有的话<br>$agent 用户代理伪装 (Snoopy v0.1)<br>$referer 来路信息，如果有的话<br>$cookies cookies， 如果有的话<br>$rawheaders 其他的头信息, 如果有的话<br>$maxredirs 最大重定向次数， 0=不允许 (5)<br>$offsiteok whether or not to allow redirects off-site. (true)<br>$expandlinks 是否将链接都补全为完整地址 (true)<br>$user 认证用户名, 如果有的话<br>$pass 认证用户名, 如果有的话<br>$accept http 接受类型 (image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, <em>/</em>)<br>$error 哪里报错, 如果有的话<br>$response_code 从服务器返回的响应代码<br>$headers 从服务器返回的头信息<br>$maxlength 最长返回数据长度<br>$read_timeout 读取操作超时 (requires PHP 4 Beta 4+)<br>设置为0为没有超时<br>$timed_out 如果一次读取操作超时了，本属性返回 true (requires PHP 4 Beta 4+)<br>$maxframes 允许追踪的框架最大数量<br>$status 抓取的http的状态<br>$temp_dir 网页服务器能够写入的临时文件目录 (/tmp)<br>$curl_path cURL binary 的目录, 如果没有cURL binary就设置为 false</p>
<p>四、以下是demo</p>
<div class="cnblogs_Highlighter" style="color: #000000;"><br><div id="highlighter_800217" class="syntaxhighlighter nogutter  php"><br>[php]&lt;/div&gt;<br>&lt;div class=&quot;syntaxhighlighter nogutter  php&quot;&gt;include &quot;Snoopy.class.php&quot;;<br>$snoopy = new Snoopy;<br><br>$snoopy-&gt;proxy_host = &quot;www.baidu.com&quot;;<br>$snoopy-&gt;proxy_port = &quot;8080&quot;;<br><br>$snoopy-&gt;agent = &quot;(compatible; MSIE 4.01; MSN 2.5; AOL 4.0; Windows 98)&quot;;<br>$snoopy-&gt;referer = &quot;<a href="http://www.baidu.com/&amp;quot" target="_blank" rel="external">http://www.baidu.com/&amp;quot</a>;;<br><br>$snoopy-&gt;cookies[&quot;SessionID&quot;] = 238472834723489l;<br>$snoopy-&gt;cookies[&quot;favoriteColor&quot;] = &quot;RED&quot;;<br><br>$snoopy-&gt;rawheaders[&quot;Pragma&quot;] = &quot;no-cache&quot;;<br><br>$snoopy-&gt;maxredirs = 2;<br>$snoopy-&gt;offsiteok = false;<br>$snoopy-&gt;expandlinks = false;<br><br>$snoopy-&gt;user = &quot;joe&quot;;<br>$snoopy-&gt;pass = &quot;bloe&quot;;<br><br>if($snoopy-&gt;fetchtext(&quot;<a href="http://www.baidu.com&amp;quot" target="_blank" rel="external">http://www.baidu.com&amp;quot</a>;))<br>{<br>echo &quot; &lt;PRE&gt;&quot;.htmlspecialchars($snoopy-&gt;results).&quot; &lt;/PRE&gt;\n&quot;; &lt;BR&gt;<br>} &lt;BR&gt;<br>else &lt;BR&gt;<br>echo &quot;error fetching document: &quot;.$snoopy-&gt;error.&quot;\n&quot;;<br><br>snoopy采集phpchina示例<br>&lt;?php<br>//采集phpchina<br>set_time_limit(0);<br>require_once(&quot;Snoopy.class.php&quot;);<br>$snoopy=new Snoopy();<br>//登陆论坛<br>$submit_url = &quot;<a href="http://www.phpchina.com/bbs/logging.php?action=login&amp;quot" target="_blank" rel="external">http://www.phpchina.com/bbs/logging.php?action=login&amp;quot</a>;;<br>$submit_vars[&quot;loginmode&quot;] = &quot;normal&quot;;<br>$submit_vars[&quot;styleid&quot;] = &quot;1&quot;;<br>$submit_vars[&quot;cookietime&quot;] = &quot;315360000&quot;;<br>$submit_vars[&quot;loginfield&quot;] = &quot;username&quot;;<br>$submit_vars[&quot;username&quot;] = &quot;<strong><em>&quot;; //你的用户名<br>$submit_vars[&quot;password&quot;] = &quot;**</em></strong>&quot;; //你的密码<br>$submit_vars[&quot;questionid&quot;] = &quot;0&quot;;<br>$submit_vars[&quot;answer&quot;] = &quot;&quot;;<br>$submit_vars[&quot;loginsubmit&quot;] = &quot;提 交&quot;;<br>$snoopy-&gt;submit($submit_url,$submit_vars);<br>if ($snoopy-&gt;results)<br>{<br>//获取连接地址<br>$snoopy-&gt;fetchlinks(&quot;<a href="http://www.phpchina.com/bbs&amp;quot" target="_blank" rel="external">http://www.phpchina.com/bbs&amp;quot</a>;);<br>$url=array();<br>$url=$snoopy-&gt;results;<br>//print_r($url);<br>foreach ($url as $key=&gt;$value)<br>{<br>//匹配<a href="http://www.phpchina.com/bbs/forumdisplay.php?fid=156&amp;sid=VfcqTR地址即论坛板块地址" target="_blank" rel="external">http://www.phpchina.com/bbs/forumdisplay.php?fid=156&amp;sid=VfcqTR地址即论坛板块地址</a><br>if (!preg_match(&quot;/^(http:\/\/www.phpchina.com\/bbs\/forumdisplay.php\?fid=)[0-9]<em>&amp;sid=[a-zA-Z]{6}/i&quot;,$value))<br>{<br>unset($url[$key]);<br>}<br>}<br>//print_r($url);<br>//获取到板块数组$url，循环访问，此处获取第一个模块第一页的数据<br>$i=0;<br>foreach ($url as $key=&gt;$value)<br>{<br>if ($i&gt;=1)<br>{<br>//测试限制<br>break;<br>}<br>else<br>{<br>//访问该模块，提取帖子的连接地址，正式访问里需要提取帖子分页的数据，然后根据分页数据提取帖子数据<br>$snoopy=new Snoopy();<br>$snoopy-&gt;fetchlinks($value);<br>$tie=array();<br>$tie[$i]=$snoopy-&gt;results;<br>//print_r($tie);<br>//转换数组<br>foreach ($tie[$i] as $key=&gt;$value)<br>{<br>//匹配<a href="http://www.phpchina.com/bbs/viewthread.php?tid=68127&amp;amp" target="_blank" rel="external">http://www.phpchina.com/bbs/viewthread.php?tid=68127&amp;amp</a>; extra=page%3D1&amp;page=1&amp;sid=iBLZfK<br>if (!preg_match(&quot;/^(http:\/\/www.phpchina.com\/bbs\/viewthread.php\?tid=)[0-9]</em>&amp;extra=page\%3D1&amp;page=[0-9]<em>&amp;sid=[a-zA-Z]{6}/i&quot;,$value))<br>{<br>unset($tie[$i][$key]);<br>}<br>}<br>//print_r($tie[$i]);<br>//归类数组，将同一个帖子不同页面的内容放一个数组里<br>$left=’’;//连接左边公用地址<br>$j=0;<br>$page=array();<br>foreach ($tie[$i] as $key=&gt;$value)<br>{<br>$left=substr($value,0,52);<br>$m=0;<br>foreach ($tie[$i] as $pkey=&gt;$pvalue)<br>{<br>//重组数组<br>if (substr($pvalue,0,52)==$left)<br>{<br>$page[$j][$m]=$pvalue;<br>$m++;<br>}<br>}<br>$j++;<br>}<br>//去除重复项开始<br>//$page=array_unique($page);只能用于一维数组<br>$paget[0]=$page[0];<br>$nums=count($page);<br>for ($n=1;$n &lt;$nums;$n++)<br>{<br>$paget[$n]=array_diff($page[$n],$page[$n-1]);<br>}<br>//去除多维数组重复值结束<br>//去除数组空值<br>unset($page);<br>$page=array();//重新定义page数组<br>$page=array_filter($paget);<br>//print_r($page);<br>$u=0;<br>$title=array();<br>$content=array();<br>$temp=’’;<br>$tt=array();<br>foreach ($page as $key=&gt;$value)<br>{<br>//外围循环，针对一个帖子<br>if (is_array($value))<br>{<br>foreach ($value as $k1=&gt;$v1)<br>{<br>//页内循环，针对一个帖子的N页<br>$snoopy=new Snoopy();<br>$snoopy-&gt;fetch($v1);<br>$temp=$snoopy-&gt;results;<br>//读取标题<br>if (!preg_match_all(&quot;/ &lt;h2&gt;(.</em>) &lt;\/h2&gt;/i&quot;,$temp,$tt))<br>{<br>echo &quot;no title&quot;;<br>exit;<br>}<br>else<br>{<br>$title[$u]=$tt[1][1];<br>}<br>unset($tt);<br>//读取内容<br>if (!preg_match<em>all(&quot;/ &lt;div id=\&quot;postmessage</em>[0-9]{1,8}\&quot; class=\&quot;t_msgfont\&quot;&gt;(.<em>) &lt;\/div&gt;/i&quot;,$temp,$tt))<br>{<br>print_r($tt);<br>echo &quot;no content1&quot;;<br>exit;<br>}<br>else<br>{<br>foreach ($tt[1] as $c=&gt;$c2)<br>{<br>$content[$u].=$c2;<br>}<br>}<br>}<br>}<br>else<br>{<br>//直接取页内容<br>$snoopy=new Snoopy();<br>$snoopy-&gt;fetch($value);<br>$temp=$snoopy-&gt;results;<br>//读取标题<br>if (!preg_match_all(&quot;/ &lt;h2&gt;(.</em>) &lt;\/h2&gt;/i&quot;,$temp,$tt))<br>{<br>echo &quot;no title&quot;;<br>exit;<br>}<br>else<br>{<br>$title[$u]=$tt[1][1];<br>}<br>unset($tt);<br>//读取内容<br>if (!preg_match<em>all(&quot;/ &lt;div id=\&quot;postmessage</em>[0-9]<em>\&quot; class=\&quot;t_msgfont\&quot;&gt;(.</em>) &lt;\/div&gt;/i&quot;,$temp,$tt))<br>{<br>echo &quot;no content2&quot;;<br>exit;<br>}<br>else<br>{<br>foreach ($tt[1] as $c=&gt;$c2)<br>{<br>$content[$u].=$c2;<br>}<br>}<br>}<br>$u++;<br>}<br>print_r($content);<br>}<br>$i++;<br>}<br>}<br>else<br>{<br>echo &quot;login failed&quot;;<br>exit;<br>}<br>?&gt;&lt;/div&gt;<br>&lt;div class=&quot;syntaxhighlighter nogutter  php&quot;&gt;[/php]<br></div><br></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/php-snoopy.html" data-id="cji8sg1tm008n40iovi5n6zht" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ftplet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/ftplet.html" class="article-date">
  <time datetime="2014-06-26T04:58:06.000Z" itemprop="datePublished">2014-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ftplet.html">Ftplet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div id="rightColumn"><br><br># Ftplet<br><br>## Overview<br><br>The Ftplet API is a simple API used to handle different FtpServer notifications. Apache FtpServer is a Ftplet container, allowing administrators to deploy Ftplet to carry out a variety of complex FTP event handler tasks.<br><br>Implementing a custom Ftplet is generally a simple task, most of whose complexity lies in coding the actual work to be done by the Ftplet. This is largely due to the simplicity of the Ftplet interface and the fact that a DefaultFtplet class is provided as part of the Ftplet package.<br><br>The Ftplet interface supports two lifecycle methods to provide initialization (the init() method) and shutdown (the destroy() method). Main processing is done in different notification methods, which take a FtpSession object and a FtpRequest object. All the notification methods return FtpletResult object to indicate the future action.<br><br>There will be one instance of Ftplet object. Notification methods will be called from different connections running in different threads. So Ftplet implementation has to be thread-safe. Each connection will have its own request (FtpRequest) and session (FtpSession) objects.<br><br>## Main Classes<br><br>### FtpletResult<br><br>This class encapsulates the return values of the ftplet methods. There are four static FtpletResult values.<br><br><em>   <strong>DEFAULT</strong> : This return value indicates that the next ftplet method will be called. If no other ftplet is available, the FtpServer will process the request.
</em>   <strong>NO_FTPLET</strong> : This return value indicates that the other ftplet methods will not be called but the FtpServer will continue processing this request.<br><em>   <strong>SKIP</strong> : It indicates that the server will skip everything. No further processing will be done for this request.
</em>   <strong>DISCONNECT</strong> : It indicates that the server will skip and disconnect the client. No other request from the same client will be served.<br>So, DEFAULT &lt; NO_FTPLET &lt; SKIP &gt; DISCONNECT. If the Ftplet returns null, DEFAULT is assumed.<br><br>## FtpSession<br><br>The session object is kept for the entire user session. So the attributes set by setAttribute() will be always available later unless that attribute is removed. Different session will have different FtpSession objects. From here we can get user information, data streams, user file system view etc.<br><br>Ftplets can use this to send custom codes and messages to client.<br><br>## FtpRequest<br><br>Provides the client request information to a ftplet. Contains the FTP command and argument.<br><br>## Ftplet<br><br>There will be only one instance of Ftplet. During startup the Ftplets will be initialized. The initialization sequence is same as the Ftplet sequence in the configuration. Then all notification methods will be called and when the FtpServer goes down, the Ftplet will be destroyed. The following method describes all the notification methods.<br><table><br><thead><br><tr><br><th>Method</th><br><th>Description</th><br></tr><br></thead><br><tbody><br><tr><br><td>onConnect</td><br><td>Client connect notification method. This is the first method FtpServer will call. If it returns SKIP, IP restriction check, connection limit check will not be performed and the server will not send the welcome message (220).</td><br></tr><br><tr><br><td>onDisconnect</td><br><td>Client disconnect notification method. This is the last method FtpServer will call. Whatever it returns, the client connection will be closed.</td><br></tr><br><tr><br><td>beforeCommand</td><br><td>Called before the server invoke the command.</td><br></tr><br><tr><br><td>afterCommand</td><br><td>Called after the server as invoked the command.</td><br></tr><br></tbody><br></table><br><br>## DefaultFtplet<br><br>DefaultFtplet provides some convenience methods for common FTP commands. Users can easily extend the DefaultFtplet class and choose what methods to override and handle.<br><table><br><thead><br><tr><br><th>Method</th><br><th>Description</th><br></tr><br></thead><br><tbody><br><tr><br><td>onLogin</td><br><td>Client login notification method. This will be called after the user authentication. In this case the FtpServer has already sent the login OK (230) reply. This is called during FTP PASS request. The FTP session will be disconnected in the return value is FtpletResult.DISCONNECT.</td><br></tr><br><tr><br><td>onDeleteStart</td><br><td>Before file deletion this method will be called. Before this FtpServer will not check anything like file existence or permission. The requested file name can be get from request argument. We can get the file object from the request file system view. This is called in DELE FTP command. The method should send some responses (like 250, 450, 550) in case of SKIP return value. In this case, the server will skip the command processing and the ftplet has to send appropriate response values.</td><br></tr><br><tr><br><td>onDeleteEnd</td><br><td>This method will be called after the file deletion, successful or not. In this case the FtpServer has already sent the reply message. This is called in DELE FTP command.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>This method will be called before the file upload. The file name can be get from the request argument. We can get the data input stream from request. This will be called before the permission check. This is called during STOR command. If the method returns SKIP, it has to send responses before and after processing. For example, before opening the data input stream, the method has to notify the client with a response code 150. Similarly, after the data transfer, the method has to notify the client with a response code 226. In case of any error, the method should send different response codes like 450, 425, 426, 551.</td><br></tr><br><tr><br><td>onUploadEnd</td><br><td>This notification method will be called to indicate that the file transfer is successful and the server has send the replies. In case of any error this method will not be called. This is called in STOR command.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>This is file download request notification method called during RETR command. This will be called before the file download. We can get the file name argument from request. Similarly, the data output stream can be get from the request. This will be called before the file existance and permissoin check. If the method returns SKIP, it has to send responses before and after processing. For example, before opening the data output stream, the method has to notify the client with a response code 150. Similarly, after the data transfer, the method has to notify the client with a response code 226. In case of any error, the method should send different response codes like 450, 425, 426, 551.</td><br></tr><br><tr><br><td>onDownloadEnd</td><br><td>This notification method will be called to indicate that the file transfer is successful and the server has send the replies in RETR command.</td><br></tr><br><tr><br><td>onRmdirStart</td><br><td>Before directory deletion this method will be called during RMD command. Before this FtpServer will not check anything like directory existance or permission. The requested directory name can be get from request argument. If the method returns the SKIP, it has to send appropriate response codes to clients like 250, 450, 550.</td><br></tr><br><tr><br><td>onRmdirEnd</td><br><td>This method will be called after the invocation of the RMD command. In this case the FtpServer has already sent the reply message.</td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>Before directory creation this method will be called during MKD command. Before this FtpServer will not check anything like directory existance or permission. The requested directory name can be get from request argument. If it returns SKIP, it has to send appropriate response codes to clients like 250, 550.</td><br></tr><br><tr><br><td>onMkdirEnd</td><br><td>This method will be called if the directory creation is successful in MKD command. In this case the FtpServer has already sent the reply message.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>This is file append request notification method called in APPE command. The file name can be get from the request argument. We can get the data input stream from request. This will be called before the permission check. If the method returns SKIP, it has to send responses before and after processing. For example, before opening the data input stream, the method has to notify the client with a response code 150. Similarly, after the data transfer, the method has to notify the client with a response code 226. In case of any error, the method should send different response codes like 450, 425, 426, 551.</td><br></tr><br><tr><br><td>onAppendEnd</td><br><td>This is file append success notification method called in APPE command.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>This is unique file create request notification method called in STOU command. We can get the data input stream from request. This will be called before the permission check. If the method returns SKIP, it has to send responses before and after processing. For example, before opening the data input stream, the method has to notify the client with a response code 150. Similarly, after the data transfer, the method has to notify the client with a response code 226. In case of any error, the method should send different response codes like 450, 425, 426, 551.</td><br></tr><br><tr><br><td>onUploadUniqueEnd</td><br><td>This is unique file create success notification method called in STOU command. This notification method will be called to indicate the the server has send the replies.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>This is file rename start notification method called in RNTO command. This will be called before the file existance or permission check. The “rename from” file object can be get from request object. If it returns SKIP, it has to send appropriate response codes like 503, 553, 250.</td><br></tr><br><tr><br><td>onRenameEnd</td><br><td>This is file rename success notification method called in RNFR command. This will be called before the file existance or permission check. The “rename from” file object an be get from request object. This notification method will be called after the invocation of the RNTO command and the server has send the reply message.</td><br></tr><br><tr><br><td>onSite</td><br><td>This is SITE command start notification method. It gives a chance to implement custom SITE command. If this method returns SKIP or DISCONNECT, the existing SITE commands will not be executed.</td><br></tr><br></tbody><br></table><br><br>## Response Codes<br><br>This section gives an overview on different response codes which might be useful in developing custom ftplet. These commands might be used when the ftplet method return value is SKIP.<br><table><br><thead><br><tr><br><th>Method</th><br><th>Response Code</th><br><th>Description</th><br></tr><br></thead><br><tbody><br><tr><br><td>onConnect</td><br><td>220</td><br><td>Service ready for new user.</td><br></tr><br><tr><br><td>onConnect</td><br><td>530</td><br><td>No server access from the IP.</td><br></tr><br><tr><br><td>onConnect</td><br><td>530</td><br><td>Maximum server connection has been reached.</td><br></tr><br><tr><br><td>onDisconnect</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onLogin</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onDeleteStart</td><br><td>250</td><br><td>Requested file action okay</td><br></tr><br><tr><br><td>onDeleteStart</td><br><td>450</td><br><td>No permission to delete.</td><br></tr><br><tr><br><td>onDeleteStart</td><br><td>550</td><br><td>Not a valid file.</td><br></tr><br><tr><br><td>onDeleteStart</td><br><td>450</td><br><td>Can’t delete file.</td><br></tr><br><tr><br><td>onDeleteEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onUploadStart</td><br><td>150</td><br><td>File status okay; about to open data connection.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>226</td><br><td>Transfer complete.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>550</td><br><td>Invalid path.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>550</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>425</td><br><td>Can’t open data connection.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>426</td><br><td>Data connection error.</td><br></tr><br><tr><br><td>onUploadStart</td><br><td>551</td><br><td>Error on output file.</td><br></tr><br><tr><br><td>onUploadEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>150</td><br><td>File status okay; about to open data connection.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>226</td><br><td>Transfer complete.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>550</td><br><td>No such file or directory.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>550</td><br><td>Not a plain file.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>550</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>425</td><br><td>Can’t open data connection.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>426</td><br><td>Data connection error.</td><br></tr><br><tr><br><td>onDownloadStart</td><br><td>551</td><br><td>Error on input file.</td><br></tr><br><tr><br><td>onDownloadEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onRmdirStart</td><br><td>250</td><br><td>Directory removed.</td><br></tr><br><tr><br><td>onRmdirStart</td><br><td>550</td><br><td>Not a valid directory.</td><br></tr><br><tr><br><td>onRmdirStart</td><br><td>550</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onRmdirStart</td><br><td>550</td><br><td>Can’t remove directory.</td><br></tr><br><tr><br><td>onRmdirEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>250</td><br><td>Directory created.</td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>550</td><br><td>Not a valid file.</td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>550</td><br><td>Permission denied</td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>550</td><br><td>Directory already exists.</td><br></tr><br><tr><br><td>onMkdirStart</td><br><td>550</td><br><td>Can’t create directory.</td><br></tr><br><tr><br><td>onMkdirEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onAppendStart</td><br><td>150</td><br><td>File status okay; about to open data connection.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>226</td><br><td>Transfer complete.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>550</td><br><td>Not a plain file.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>550</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>425</td><br><td>Can’t open data connection.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>426</td><br><td>Data connection error.</td><br></tr><br><tr><br><td>onAppendStart</td><br><td>551</td><br><td>Error on output file.</td><br></tr><br><tr><br><td>onAppendEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>150</td><br><td>File status okay; about to open data connection.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>250</td><br><td>filename: Transfer started.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>226</td><br><td>filename: Transfer complete.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>550</td><br><td>Unique file name error.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>550</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>425</td><br><td>Can’t open data connection.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>426</td><br><td>Data connection error.</td><br></tr><br><tr><br><td>onUploadUniqueStart</td><br><td>551</td><br><td>Error on output file.</td><br></tr><br><tr><br><td>onUploadUniqueEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onRenameStart</td><br><td>250</td><br><td>Requested file action okay, file renamed.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>503</td><br><td>Can’t find the file which has to be renamed.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>553</td><br><td>Not a valid file name.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>553</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>553</td><br><td>No such file or directory.</td><br></tr><br><tr><br><td>onRenameStart</td><br><td>553</td><br><td>Can’t rename file.</td><br></tr><br><tr><br><td>onRenameEnd</td><br><td></td><br><td></td><br></tr><br><tr><br><td>onSite</td><br><td>200</td><br><td>Command SITE okay.</td><br></tr><br><tr><br><td>onSite</td><br><td>530</td><br><td>Permission denied.</td><br></tr><br><tr><br><td>onSite</td><br><td>502</td><br><td>Not implemented.</td><br></tr><br><tr><br><td>onSite</td><br><td>500</td><br><td>Execution failed.</td><br></tr><br></tbody><br></table><br><br>## Configuration<br><br>Ftplet will get the Ftplet specific configuration as the init() method argument.<br><br>## Implementation<br><br>Ftplets are regular POJOs. If running the server as embedded they can be added to the FtpletContainer as normal instances of the object. If using the XML configuration, they are configured and Spring beans within the ftplets element. Here’s an example:<br><div class="codehilite"><br><pre><span class="nt">&lt;ftplets&gt;</span><br>    <span class="nt">&lt;ftplet</span> <span class="na">name=</span><span class="s">“ftplet1”</span><span class="nt">&gt;</span><br>        <span class="nt">&lt;beans:bean</span> <span class="na">class=</span><span class="s">“org.apache.ftpserver.examples.MyFtplet”</span><span class="nt">&gt;</span><br>            <span class="nt">&lt;beans:property</span> <span class="na">name=</span><span class="s">“foo”</span> <span class="na">value=</span><span class="s">“123”</span> <span class="nt">/&gt;</span><br>        <span class="nt">&lt;/beans:bean&gt;</span><br>    <span class="nt">&lt;/ftplet&gt;</span><br><span class="nt">&lt;/ftplets&gt;</span><br></pre><br></div>

<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>The Ftplet must be added to Apache FtpServer classpath so that the Ftplet can be loaded. There are three ways you can do that.</p>
<ol>
<li>Modify your system CLASSPATH environment variable to include your ftplet classes.</li>
<li>Copy your ftplet class files (unpacked) in the common/classes bdirectory of the FtpServer installation.</li>
<li>Place a jar file containing the custom ftplet class files in the common/lib subdirectory of the FtpServer installation.<br></li></ol></div>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/ftplet.html" data-id="cji8sg1ru005340iocxv4g6zl" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ilmt-redhat-browser-no-found" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/ilmt-redhat-browser-no-found.html" class="article-date">
  <time datetime="2014-06-24T05:41:11.000Z" itemprop="datePublished">2014-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/OperatingSystem/">OperatingSystem</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ilmt-redhat-browser-no-found.html">Launchpad Does Not Work With Firefox version 10+</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="在Redhat6-4中安装ILMT7-2-2-会提示browser没有安装。"><a href="#在Redhat6-4中安装ILMT7-2-2-会提示browser没有安装。" class="headerlink" title="在Redhat6.4中安装ILMT7.2.2,会提示browser没有安装。"></a>在Redhat6.4中安装ILMT7.2.2,会提示browser没有安装。</h2><p>可以通过下面方法修复。</p>
<p>&nbsp;</p>
<h2 id="Problem-Abstract"><a href="#Problem-Abstract" class="headerlink" title="Problem(Abstract)"></a>Problem(Abstract)</h2><p>When you try to install using the Launchpad, the Launchpad does not open. Instead, a supported browser error message is shown.</p>
<h2 id="Symptom"><a href="#Symptom" class="headerlink" title="Symptom"></a>Symptom</h2><div class="ibm-domino-rtf"><br><br>The error message contains the following text:<br><tt><br>Unable to find supported browser</tt><br><br><tt><br>An error occurred while starting the launchpad. This error typically occurs when the launchpad is unable to find a supported browser</tt>.<br><br></div>

<h2 id="Cause"><a href="#Cause" class="headerlink" title="Cause"></a>Cause</h2><div class="ibm-domino-rtf"><br><br>When Firefox has been updated to Version 10 or later, the Launchpad cannot identify it as having been installed.<br><br></div>

<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><div class="ibm-domino-rtf"><br><br>Unix/Linux<br><br></div>

<h2 id="Diagnosing-the-problem"><a href="#Diagnosing-the-problem" class="headerlink" title="Diagnosing the problem"></a>Diagnosing the problem</h2><div class="ibm-domino-rtf"><br><br>Use the <tt>firefox -version</tt> command to determine the exact version of Firefox that you have installed.<br><br></div>

<h2 id="Resolving-the-problem"><a href="#Resolving-the-problem" class="headerlink" title="Resolving the problem"></a>Resolving the problem</h2><div class="ibm-domino-rtf"><br><br>To get the Launchpad working in different versions, you need to edit the <tt>&lt;install_root&gt;/launchpad/browser.sh</tt> command so that it contains the following additional strings in the supportedFirefoxVersion case statement:<br><br>The function should then look like this:<br><tt>supportedFirefoxVersion()</tt><br><br><tt>{</tt><br><tt>       case “$<em>“ in</em></tt><br><tt>               Firefox\ [1-9].<em>) return 0;;</em></tt><br><tt>               Firefox/[1-9].<em>) return 0;;</em></tt><br><tt>               Firefox\ [1-9][0-9].<em>) return 0;;</em></tt><br><tt>               Firefox\ 1[0-9].*) return 0;;</tt><br><tt> …</tt><br><br></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/ilmt-redhat-browser-no-found.html" data-id="cji8sg1sa005y40io0ziko707" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ilmt/">ilmt</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-db2-install-on-redhat64" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/db2-install-on-redhat64.html" class="article-date">
  <time datetime="2014-06-24T02:58:45.000Z" itemprop="datePublished">2014-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MiddleWare/">MiddleWare</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/db2-install-on-redhat64.html">DB2 install on redhat64</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>db2安装时候，报相关包错误，</p>
<p>[shell]</p>
<p>[root@localhost server]# ./db2setup -r /root/db2/db2.rsp<br>WARNING:<br> The 32 bit library file libstdc++.so.6 is not found on the system.<br> 32-bit applications may be affected.<br>WARNING:<br> The required library file libstdc++.so.5 is not found on the system.<br>WARNING:<br>DBT3534W The db2prereqcheck utility determined that ASLR is set to ON and that this could cause issues with some tools.<br>WARNING:<br> The 32-bit library file libpam.so is not found on the system.<br> Check the following web site for the up-to-date system requirements<br> of IBM DB2 9.7<br> <a href="http://www.ibm.com/software/data/db2/udb/sysreqs.html" target="_blank" rel="external">http://www.ibm.com/software/data/db2/udb/sysreqs.html</a><br> <a href="http://www.software.ibm.com/data/db2/linux/validate" target="_blank" rel="external">http://www.software.ibm.com/data/db2/linux/validate</a><br> Aborting the current installation …<br> Run installation with the option &quot;-f sysreq&quot; parameter to force the installation.</p>
<p>[/shell]</p>
<p>1.执行db2_install的时候报了错，安装通过了，后来发现解压包下有个预检的脚本，拿来重新执行了下<br>[root@localhost lib64]# /server/db2prereqcheck<br>WARNING:<br>The 32 bit library file libstdc++.so.6 is not found on the system.<br>32-bit applications may be affected.</p>
<p>2.安装库文件<br>[root@localhost lib64]# yum install libstdc++.so.6<br>………………..<br>Complete!</p>
<p>3.再次执行[root@localhost server]# ./db2prereqcheck就没有报错了</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/db2-install-on-redhat64.html" data-id="cji8sg1r0003f40iokgpiiaht" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB2/">DB2</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-redhat-centos-yum" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/redhat-centos-yum.html" class="article-date">
  <time datetime="2014-06-24T02:13:04.000Z" itemprop="datePublished">2014-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/OperatingSystem/">OperatingSystem</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/redhat-centos-yum.html">Redhat中安装Centos YUM</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Redhat Linux通常由于没有注册，导致yum程序无法使用，需要将其替换为centos的yum程序。</p>
<p>1. 下载Yum的安装包,由于体系结构的不同和包的更新，因此目录和文件名的版本号可能需要调整以下。</p>
<p><a href="http://centos.ustc.edu.cn/centos/" target="_blank" rel="external">http://centos.ustc.edu.cn/centos/</a><br>对应版本下载不同yum版本<br>都是在Packages中</p>
<p>2. 查出当前的yum程序，进行卸载</p>
<p>#rpm -qa | grep yum<br>然后删除</p>
<h1 id="rpm-e-yum-XXX-–nodeps"><a href="#rpm-e-yum-XXX-–nodeps" class="headerlink" title="rpm -e yum-XXX –nodeps"></a>rpm -e yum-XXX –nodeps</h1><p>3. 下载并导入KEY</p>
<p><a href="http://centos.ustc.edu.cn/centos/" target="_blank" rel="external">http://centos.ustc.edu.cn/centos/</a><br>对应版本下载对应key</p>
<h1 id="cd-etc-pki-rpm-gpg"><a href="#cd-etc-pki-rpm-gpg" class="headerlink" title="cd /etc/pki/rpm-gpg/"></a>cd /etc/pki/rpm-gpg/</h1><h1 id="wget-http-mirrors-sohu-com-centos-RPM-GPG-KEY-CentOS-5"><a href="#wget-http-mirrors-sohu-com-centos-RPM-GPG-KEY-CentOS-5" class="headerlink" title="wget http://mirrors.sohu.com/centos/RPM-GPG-KEY-CentOS-5"></a>wget <a href="http://mirrors.sohu.com/centos/RPM-GPG-KEY-CentOS-5" target="_blank" rel="external">http://mirrors.sohu.com/centos/RPM-GPG-KEY-CentOS-5</a></h1><h1 id="rpm-–import-etc-pki-rpm-gpg-RPM-GPG-KEY"><a href="#rpm-–import-etc-pki-rpm-gpg-RPM-GPG-KEY" class="headerlink" title="rpm –import /etc/pki/rpm-gpg/RPM-GPG-KEY*"></a>rpm –import /etc/pki/rpm-gpg/RPM-GPG-KEY*</h1><p>4. 安装yum安装包<br>rpm -ivh yum-*</p>
<p>5. 修改配置文件</p>
<p>vi /etc/yum.repos.d/rhel-debuginfo.repo</p>
<p>[shell]</p>
<p>[base]<br>name=Red Hat Enterprise Linux 6 -Base<br>baseurl=<a href="http://mirrors.sohu.com/centos/6.5/os/x86_64/" target="_blank" rel="external">http://mirrors.sohu.com/centos/6.5/os/x86_64/</a><br>gpgcheck=1</p>
<p>[update]<br>name=Red Hat Enterprise Linux 6 -Updates<br>baseurl=<a href="http://mirrors.sohu.com/centos/6.5/updates/x86_64/" target="_blank" rel="external">http://mirrors.sohu.com/centos/6.5/updates/x86_64/</a><br>gpgcheck=1</p>
<p>[extras]<br>name=Red Hat Enterprise Linux 6 -Extras<br>baseurl=<a href="http://mirrors.sohu.com/centos/6.5/extras/x86_64/" target="_blank" rel="external">http://mirrors.sohu.com/centos/6.5/extras/x86_64/</a><br>gpgcheck=1</p>
<p>[addons]<br>name=Red Hat Enterprise Linux 6 -Addons<br>baseurl=<a href="http://mirrors.sohu.com/centos/6.5/addons/x86_64/" target="_blank" rel="external">http://mirrors.sohu.com/centos/6.5/addons/x86_64/</a><br>gpgcheck=1</p>
<p>[/shell]</p>
<p>至此yum安装完成，可以 yum install 安装程序了, 注意不同版本跟换不同路径</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/redhat-centos-yum.html" data-id="cji8sg1u7009t40io7tsd89n0" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apache-ftpserver-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/apache-ftpserver-mysql.html" class="article-date">
  <time datetime="2014-06-21T14:50:54.000Z" itemprop="datePublished">2014-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/apache-ftpserver-mysql.html">Apache ftpServer的安装与配置(配置保存在数据库)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1 下载ftpServer，目前最新版本是1.0.6，地址<a href="http://mina.apache.org/ftpserver-project/downloads.html" target="_blank" rel="external">http://mina.apache.org/ftpserver-project/downloads.html</a></p>
<p>2 解压缩：tar -zvxf  ftpserver-1.0.6.tar.gz</p>
<p>3 进入配置文件目录：cd apache-ftpserver-1.0.6/res/conf</p>
<p>4 配置用户登录信息</p>
<p>（1）使用文件进行用户登录验证</p>
<p>修改文件 users.properties（其中蓝色字体为用户名，红色字体为密码）<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.userpassword=<span style="color: #ff0000;">admin</span><br>ftpserver.user.<span style="color: #0000ff;">admin</span>.homedirectory=./res/home<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.enableflag=true<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.writepermission=true<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.maxloginnumber=0<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.maxloginperip=0<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.idletime=0<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.uploadrate=0<br>ftpserver.user.<span style="color: #0000ff;">admin</span>.downloadrate=0</p>
<p>ftpserver.user.anonymous.userpassword=<br>ftpserver.user.anonymous.homedirectory=./res/home<br>ftpserver.user.anonymous.enableflag=true<br>ftpserver.user.anonymous.writepermission=false<br>ftpserver.user.anonymous.maxloginnumber=20<br>ftpserver.user.anonymous.maxloginperip=2<br>ftpserver.user.anonymous.idletime=300<br>ftpserver.user.anonymous.uploadrate=4800</p>
<p>执行命令：cp ftpd-typical.xml ftpd-file.xml</p>
<p>修改文件文件ftpd-file.xml，其中红色字体为修改部分，密码加密方式修改为clear</p>
<p>&lt;server xmlns=”<a href="http://mina.apache.org/ftpserver/spring/v1" target="_blank" rel="external">http://mina.apache.org/ftpserver/spring/v1</a>“<br>xmlns:xsi=”<a href="http://www.w3.org/2001/XMLSchema-instance" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance</a>“<br>xsi:schemaLocation=”<br><a href="http://mina.apache.org/ftpserver/spring/v1" target="_blank" rel="external">http://mina.apache.org/ftpserver/spring/v1</a> <a href="http://mina.apache.org/ftpserver/ftpserver-1.0.xsd" target="_blank" rel="external">http://mina.apache.org/ftpserver/ftpserver-1.0.xsd</a><br>“<br>id=”myServer”&gt;<br>&lt;listeners&gt;<br>&lt;nio-listener name=”default” port=”2121”&gt;<br>&lt;ssl&gt;<br>&lt;keystore file=”./res/ftpserver.jks” password=”password” /&gt;<br>&lt;/ssl&gt;<br>&lt;/nio-listener&gt;<br>&lt;/listeners&gt;<br>&lt;file-user-manager file=”./res/conf/users.properties”  <span style="color: #ff0000; font-family: Calibri; font-size: small;">encrypt-passwords = “clear” </span>/&gt;<br>&lt;/server&gt;</p>
<p>退回目录apache-ftpserver-1.0.6/，启动ftp服务 sh bin/ftpd.sh res/conf/ftpd-file.xml</p>
<p>执行：ftp 127.0.0.1 2121     输入用户和密码：admin    admin</p>
<p>（2）使用数据库进行验证，这里数据库选用mysql</p>
<p>选定一个数据库（这里使用ftpserver），根据文件apache-ftpserver-1.0.6/res/ftp-db.sql中的命令创建数据库</p>
<p>在数据库中增加一条记录：insert into FTP_USER values(“user1”,”123456”,”./res/home/user1”,1,0,0,0,0,0,0);</p>
<p>创建配置文件：</p>
<p>cd apache-ftpserver-1.0.6/res/conf</p>
<p>cp ftpd-typical.xml ftpd-db.xml</p>
<p>修改配置文件ftpd-db.xml</p>
<p>&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;<br>&lt;!–<br>Licensed to the Apache Software Foundation (ASF) under one or more<br>contributor license agreements. See the NOTICE file distributed with<br>this work for additional information regarding copyright ownership.<br>The ASF licenses this file to you under the Apache License, Version<br>2.0 (the “License”); you may not use this file except in compliance<br>with the License. You may obtain a copy of the License at<br><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="external">http://www.apache.org/licenses/LICENSE-2.0</a> Unless required by<br>applicable law or agreed to in writing, software distributed under the<br>License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR<br>CONDITIONS OF ANY KIND, either express or implied. See the License for<br>the specific language governing permissions and limitations under the<br>License.<br>–&gt;<br>&lt;server xmlns=”<a href="http://mina.apache.org/ftpserver/spring/v1" target="_blank" rel="external">http://mina.apache.org/ftpserver/spring/v1</a>“<br>xmlns:xsi=”<a href="http://www.w3.org/2001/XMLSchema-instance" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance</a>“<br><span style="color: #ff0000;"> xmlns:beans=”</span><a href="http://www.springframework.org/schema/beans" target="_blank" rel="external"><span style="color: #ff0000;">http://www.springframework.org/schema/beans</span></a><span style="color: #ff0000;">“<br>xsi:schemaLocation=”<br></span><a href="http://www.springframework.org/schema/beans" target="_blank" rel="external"><span style="color: #ff0000;">http://www.springframework.org/schema/beans</span></a><br><span style="color: #ff0000;">           </span><a href="http://www.springframework.org/schema/beans/spring-beans-2.5.xsd" target="_blank" rel="external"><span style="color: #ff0000;">http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</span></a><br><span style="color: #ff0000;">           </span><a href="http://mina.apache.org/ftpserver/spring/v1" target="_blank" rel="external"><span style="color: #ff0000;">http://mina.apache.org/ftpserver/spring/v1</span></a><br><span style="color: #ff0000;">           </span><a href="http://mina.apache.org/ftpserver/ftpserver-1.0.xsd" target="_blank" rel="external"><span style="color: #ff0000;">http://mina.apache.org/ftpserver/ftpserver-1.0.xsd</span></a><br>“<br>id=”myServer”&gt;<br>&lt;listeners&gt;<br>&lt;nio-listener name=”default” port=”2121”&gt;<br>&lt;ssl&gt;<br>&lt;keystore file=”./res/ftpserver.jks” password=”password” /&gt;<br>&lt;/ssl&gt;<br>&lt;/nio-listener&gt;<br>&lt;/listeners&gt;<br><span style="color: #339966;">&lt;!–<br>&lt;file-user-manager file=”./res/conf/users.properties” /&gt;<br>–&gt;<br></span>        &lt;db-user-manager <span style="color: #ff0000;">encrypt-passwords = “clear”&gt;<br></span>                &lt;data-source&gt;<br>&lt;beans:bean class=”org.apache.commons.dbcp.BasicDataSource”&gt;<br>&lt;beans:property name=”driverClassName” value=”com.mysql.jdbc.Driver” /&gt;<br>&lt;beans:property name=”url” value=”jdbc:mysql://<span style="color: #ff0000;">localhost</span>/<span style="color: #ff0000;">ftpserver</span>“ /&gt;<br>&lt;beans:property name=”username” value=”<span style="color: #ff0000;">root</span>“ /&gt;<br>&lt;beans:property name=”password” value=”<span style="color: #ff0000;">123456</span>“ /&gt;<br>&lt;/beans:bean&gt;<br>&lt;/data-source&gt;<br>&lt;insert-user&gt;INSERT INTO FTP_USER (userid, userpassword,<br>homedirectory, enableflag, writepermission, idletime, uploadrate,<br>downloadrate) VALUES (‘{userid}’, ‘{userpassword}’,<br>‘{homedirectory}’,<br>{enableflag}, {writepermission}, {idletime},<br>{uploadrate},<br>{downloadrate})<br>&lt;/insert-user&gt;<br>&lt;update-user&gt;UPDATE FTP_USER SET<br>userpassword=’{userpassword}’,homedirectory=’{homedirectory}’,enableflag={enableflag},writepermission={writepermission},idletime={idletime},uploadrate={uploadrate},downloadrate={downloadrate}<br>WHERE userid=’{userid}’<br>&lt;/update-user&gt;<br>&lt;delete-user&gt;DELETE FROM FTP_USER WHERE userid = ‘{userid}’<br>&lt;/delete-user&gt;<br>&lt;select-user&gt;SELECT userid, userpassword, homedirectory,<br>enableflag, writepermission, idletime, uploadrate, downloadrate,<br>maxloginnumber, maxloginperip FROM<br>FTP_USER WHERE userid = ‘{userid}’<br>&lt;/select-user&gt;<br>&lt;select-all-users&gt;SELECT userid FROM FTP_USER ORDER BY userid<br>&lt;/select-all-users&gt;<br>&lt;is-admin&gt;SELECT userid FROM FTP_USER WHERE userid=’{userid}’<br>AND<br>userid=’admin’<br>&lt;/is-admin&gt;<br>&lt;authenticate&gt;SELECT userpassword from FTP_USER WHERE<br>userid=’{userid}’&lt;/authenticate&gt;<br>&lt;/db-user-manager&gt;<br>&lt;/server&gt;<br>说明：server属性部分的红色字体一定要写，否则就会找不到beans，报错：The prefix “beans” for element “beans:bean” is not bound；db-user-manager 的属性部分的红色字体一定要写，这里的密码加密方式为clear，否则会登录不成功；下面的红色字体分别表示<span style="color: #ff0000;">localhost<span style="color: #000000;">（数据库所在的ip地址），</span>ftpserver<span style="color: #000000;">（数据库名称），</span>root<span style="color: #000000;">（连接数据库的用户名），</span>123456</span><span style="color: #000000;">（连接数据库密码）；绿色字体表示使用文件登录，需要注释掉。</span></p>
<p><span style="color: #000000;">增加数据库连接需要使用的jar，下载3个jar包</span><span style="color: #000000;">到目录apache-ftpserver-1.0.6/common/lib： commons-dbcp-1.2.2.jar、commons-pool-1.3.jar、mysql-connector-java-3.1.13-bin.jar</span></p>
<p><span style="color: #000000;">进入目录apache-ftpserver-1.0.6，启动服务：sh bin/ftpd.sh res/conf/ftpd-db.xml</span></p>
<p>执行：ftp 127.0.0.1 2121     输入用户和密码：user1  123456</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/apache-ftpserver-mysql.html" data-id="cji8sg1q1001l40ioaq00p12n" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-apache-ftpserver-s2sh" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/apache-ftpserver-s2sh.html" class="article-date">
  <time datetime="2014-06-21T14:21:28.000Z" itemprop="datePublished">2014-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/apache-ftpserver-s2sh.html">Apache FTPServer 集成到Spring(S2SH) WEB项目中</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><span style="color: #000000;">Apache FTPServer可以集成到自己的WEB项目中，单独用也非常不错。</span></p>
<p><span style="color: #000000;">测试了一下和Spring WEB项目结合。留下代码如下：</span></p>
<p>[xml]</p>
<p>&lt;listener&gt;<br>&lt;listener-class&gt;com.strong.utils.ftpservice.FtpServerListener&lt;/listener-class&gt;<br>&lt;/listener&gt;<br>&lt;context-param&gt;<br>&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br>&lt;param-value&gt;<br>/WEB-INF/classes/com/strong/spring/applicationFTP.xml<br>&lt;/param-value&gt;<br>&lt;/context-param&gt;</p>
<p>[/xml]</p>
<p>FtpServerListener.java</p>
<p>[java]<br>package ibmer.info.ftp;</p>
<p>import javax.servlet.ServletContextEvent;<br>import javax.servlet.ServletContextListener;</p>
<p>import org.apache.ftpserver.impl.DefaultFtpServer;<br>import org.springframework.web.context.WebApplicationContext;<br>import org.springframework.web.context.support.WebApplicationContextUtils;</p>
<p>public class FtpServerListener implements ServletContextListener {<br>    public void contextDestroyed(ServletContextEvent contextEvent) {<br>        System.out.println(&quot;Stopping FtpServer&quot;);<br>        DefaultFtpServer server = (DefaultFtpServer) contextEvent<br>                .getServletContext().getAttribute(&quot;FTPSERVER_CONTEXT_NAME&quot;);<br>        if (server != null) {<br>            server.stop();<br>            contextEvent.getServletContext().removeAttribute(<br>                    &quot;FTPSERVER_CONTEXT_NAME&quot;);<br>            System.out.println(&quot;FtpServer stopped&quot;);<br>        } else {<br>            System.out.println(&quot;No running FtpServer found&quot;);<br>        }<br>    }</p>
<pre><code>public void contextInitialized(ServletContextEvent contextEvent) {
    System.out.println(&amp;quot;Starting FtpServer&amp;quot;);
    WebApplicationContext ctx = WebApplicationContextUtils
            .getWebApplicationContext(contextEvent.getServletContext());
    DefaultFtpServer server = (DefaultFtpServer) ctx.getBean(&amp;quot;myServer&amp;quot;);
    contextEvent.getServletContext().setAttribute(&amp;quot;FTPSERVER_CONTEXT_NAME&amp;quot;,
            server);
    try {
        server.start();
        System.out.println(&amp;quot;FtpServer started&amp;quot;);
    } catch (Exception e) {
        throw new RuntimeException(&amp;quot;Failed to start FtpServer&amp;quot;, e);
    }
}
</code></pre><p>}<br>[/java]</p>
<p>application-FTP.xml</p>
<p>[xml]<br>&lt;server xmlns=&quot;<a href="http://mina.apache.org/ftpserver/spring/v1&amp;quot" target="_blank" rel="external">http://mina.apache.org/ftpserver/spring/v1&amp;quot</a>; xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance&amp;quot" target="_blank" rel="external">http://www.w3.org/2001/XMLSchema-instance&amp;quot</a>; xsi:schemaLocation=&quot;<a href="http://mina.apache.org/ftpserver/spring/v1" target="_blank" rel="external">http://mina.apache.org/ftpserver/spring/v1</a> <a href="http://mina.apache.org/ftpserver/ftpserver-1.0.xsd&amp;quot" target="_blank" rel="external">http://mina.apache.org/ftpserver/ftpserver-1.0.xsd&amp;quot</a>;<br>  id=&quot;StrongFTP&quot; max-logins=&quot;500&quot; anon-enabled=&quot;false&quot; max-anon-logins=&quot;123&quot; max-login-failures=&quot;124&quot; login-failure-delay=&quot;125&quot;&gt;<br>  &lt;listeners&gt;<br>    &lt;nio-listener name=&quot;default&quot; port=&quot;2222&quot; implicit-ssl=&quot;false&quot; idle-timeout=&quot;60&quot; local-address=&quot;127.0.0.1&quot; /&gt;<br>  &lt;/listeners&gt;<br>  &lt;file-user-manager file=&quot;users.properties&quot; encrypt-passwords=&quot;true&quot; /&gt;<br>&lt;/server&gt;<br>[/xml]</p>
<p>在web.xml中调用application-FTP.xml或者在spring中import这个xml。</p>
<p>[xml]<br> &lt;context-param&gt;<br> &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br> &lt;param-value&gt;<br> classpath<em>:applicationContext</em>.xml<br> &lt;/param-value&gt;<br> &lt;/context-param&gt;<br>[/xml]</p>
<p>具体参数就不解释了，大家看文档。</p>
<p>原理是做一个ServletContextListener，tomcat启动时开始ftp服务器，结束时停止ftp服务器。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/apache-ftpserver-s2sh.html" data-id="cji8sg1q3001o40iou5ztzbob" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ilmt-agent-7-2-2-on-redhat" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/ilmt-agent-7-2-2-on-redhat.html" class="article-date">
  <time datetime="2014-06-18T01:35:58.000Z" itemprop="datePublished">2014-06-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MiddleWare/">MiddleWare</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/ilmt-agent-7-2-2-on-redhat.html">ILMT agent 7.2.2按虚拟机Redhat6.4中安装，CODAG104W警告</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>安装命令<br>rpm -Uvh ILMT-TAD4D-agent-7.2.2-linux-x86.rpm</p>
<p>[shell]</p>
<h1 id="rpm-Uvh-ILMT-TAD4D-agent-7-2-2-linux-x86-rpm"><a href="#rpm-Uvh-ILMT-TAD4D-agent-7-2-2-linux-x86-rpm" class="headerlink" title="rpm -Uvh ILMT-TAD4D-agent-7.2.2-linux-x86.rpm"></a>rpm -Uvh ILMT-TAD4D-agent-7.2.2-linux-x86.rpm</h1><p>準備中… ########################################### [100%]<br>1:ILMT-TAD4D-agent       ########################################### [100%]<br>CODAG104W VMware Tools are not installed. In some cases agent may not report proper topology.<br>CODAG010I The command has successfully executed.<br>#<br>[/shell]</p>
<p>※<br>仮想マシンにVMware Toolsをインストールしているにも関わらず、警告メッセージが出力されることがあります。</p>
<p>vmware tools即使安装了，也是可能提示CODAG104W这个安装警告，大家忽略就好。</p>
<p><a href="http://www-01.ibm.com/support/docview.wss?uid=jpn1J1002437&amp;aid=2" target="_blank" rel="external">可以参考官方文档</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/ilmt-agent-7-2-2-on-redhat.html" data-id="cji8sg1s2005h40iod9c5dakp" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ilmt/">ilmt</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-esxi4-1-download" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/esxi4-1-download.html" class="article-date">
  <time datetime="2014-06-16T01:20:53.000Z" itemprop="datePublished">2014-06-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/OperatingSystem/">OperatingSystem</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/esxi4-1-download.html">ESXi4.1 相关下载信息</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>VMware-VMvisor-Installer-4.1.0.update1-348481.x86_64，也就是ESXi4.1UPdata1，安装也是非常的简单。<br>安装完后<br>1、在主机上设置好IP，<br>2、在任意一台PC机上连接：<a href="http://X.X.X.X,可以看到如下图" target="_blank" rel="external">http://X.X.X.X,可以看到如下图</a></p>
<p>VMware ESXi 4.1WelcomeGetting Started<br>If you need to access this host remotely, use the following program to install vSphere Client software. After running the installer, start the client and log in to this host.<br>Download vSphere Client<br>To streamline your IT operations with vSphere, use the following program to install vCenter. vCenter will help you consolidate and optimize workload distribution across ESX hosts, reduce new system deployment time from weeks to seconds, monitor your virtual computing environment around the clock, avoid service disruptions due to planned hardware maintenance or unexpected failure, centralize access control, and automate system administration tasks.<br>Download VMware vCenter<br>If you need more help, please refer to our documentation library:<br>vSphere 4.1 Documentation<br>For AdministratorsvSphere Remote Command Line<br>The Remote Command Line allows you to use command line tools to manage vSphere from a client machine. These tools can be used in shell scripts to automate day-to-day operations.<br>Download the Virtual Appliance<br>Download the Windows Installer (exe)<br>Download the Linux Installer (tar.gz)<br>Web-Based Datastore Browser<br>Use your web browser to find and download files (for example, virtual machine and virtual disk files).<br>For DevelopersvSphere Web Services SDK<br>Learn about our latest SDKs, Toolkits, and APIs for managing VMware ESX, ESXi, and VMware vCenter. Get sample code, reference documentation, participate in our Forum Discussions, and view our latest Sessions and Webinars.<br>unable to connect the mks:could not connect to pipe</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ibmer.info/esxi4-1-download.html" data-id="cji8sg1rh004b40io8qvs5lgp" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vmware/">vmware</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/13/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/15/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MiddleWare/">MiddleWare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OperatingSystem/">OperatingSystem</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Salesforce/">Salesforce</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/日本/">日本</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apex/">Apex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB2/">DB2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IBM/">IBM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IT/">IT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SFDC/">SFDC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SOA/">SOA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Salesforce/">Salesforce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SalesforceExam/">SalesforceExam</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SalesforceTest/">SalesforceTest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SalesforceXyTools/">SalesforceXyTools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aix/">aix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloud/">cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ecshop/">ecshop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ilmt/">ilmt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jython/">jython</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/">mq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/">tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vba/">vba</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/was/">was</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websphere/">websphere</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分布式/">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库优化/">数据库优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日本/">日本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试，test/">测试，test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/理论/">理论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络/">网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟化/">虚拟化</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apex/" style="font-size: 14.17px;">Apex</a> <a href="/tags/DB2/" style="font-size: 10.83px;">DB2</a> <a href="/tags/Database/" style="font-size: 14.17px;">Database</a> <a href="/tags/IBM/" style="font-size: 11.67px;">IBM</a> <a href="/tags/IT/" style="font-size: 12.5px;">IT</a> <a href="/tags/SFDC/" style="font-size: 14.17px;">SFDC</a> <a href="/tags/SOA/" style="font-size: 10.83px;">SOA</a> <a href="/tags/Salesforce/" style="font-size: 20px;">Salesforce</a> <a href="/tags/SalesforceExam/" style="font-size: 10px;">SalesforceExam</a> <a href="/tags/SalesforceTest/" style="font-size: 10px;">SalesforceTest</a> <a href="/tags/SalesforceXyTools/" style="font-size: 15.83px;">SalesforceXyTools</a> <a href="/tags/aix/" style="font-size: 11.67px;">aix</a> <a href="/tags/android/" style="font-size: 14.17px;">android</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/cloud/" style="font-size: 10px;">cloud</a> <a href="/tags/eclipse/" style="font-size: 10.83px;">eclipse</a> <a href="/tags/ecshop/" style="font-size: 11.67px;">ecshop</a> <a href="/tags/ilmt/" style="font-size: 12.5px;">ilmt</a> <a href="/tags/java/" style="font-size: 17.5px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/jython/" style="font-size: 10px;">jython</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/mq/" style="font-size: 10px;">mq</a> <a href="/tags/mysql/" style="font-size: 14.17px;">mysql</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/php/" style="font-size: 18.33px;">php</a> <a href="/tags/python/" style="font-size: 10.83px;">python</a> <a href="/tags/shell/" style="font-size: 10.83px;">shell</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/vba/" style="font-size: 10.83px;">vba</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/was/" style="font-size: 15px;">was</a> <a href="/tags/websphere/" style="font-size: 10px;">websphere</a> <a href="/tags/windows/" style="font-size: 14.17px;">windows</a> <a href="/tags/wordpress/" style="font-size: 16.67px;">wordpress</a> <a href="/tags/分布式/" style="font-size: 13.33px;">分布式</a> <a href="/tags/微信/" style="font-size: 10.83px;">微信</a> <a href="/tags/数据库/" style="font-size: 10.83px;">数据库</a> <a href="/tags/数据库优化/" style="font-size: 10.83px;">数据库优化</a> <a href="/tags/日本/" style="font-size: 10.83px;">日本</a> <a href="/tags/测试，test/" style="font-size: 10px;">测试，test</a> <a href="/tags/理论/" style="font-size: 19.17px;">理论</a> <a href="/tags/网络/" style="font-size: 10px;">网络</a> <a href="/tags/虚拟化/" style="font-size: 10px;">虚拟化</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2001/01/">January 2001</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2000/01/">January 2000</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/hello-world.html">Hello World</a>
          </li>
        
          <li>
            <a href="/SalesforceXyTools-Sublime-ApexCreator.html">SalesforceXyTools Sublime ApexCreator</a>
          </li>
        
          <li>
            <a href="/SalesforceXyTools-Sublime-ExportToExcel.html">SalesforceXyTools Sublime Export SObject To Excel</a>
          </li>
        
          <li>
            <a href="/SalesforceXyTools-Sublime-TestCodeCreator.html">SalesforceXyTools Sublime Test Code Creator</a>
          </li>
        
          <li>
            <a href="/SalesforceXyTools-Sublime-Install.html">SalesforceXyTools Sublime Install Help</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">About</h3>
    <div class="widget">
      邮箱：exia.sfdc@outlook.com<br />
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Exia.Huang<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>